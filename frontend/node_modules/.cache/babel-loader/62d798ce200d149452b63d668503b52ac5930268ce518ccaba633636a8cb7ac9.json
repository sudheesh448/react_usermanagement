{"ast":null,"code":"var _jsxFileName = \"F:\\\\backup\\\\react\\\\week3\\\\sudheesh\\\\frontend\\\\src\\\\items\\\\navbar\\\\Navbar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux/es/hooks/useSelector\";\nimport { logout } from \"../../ReduxStore/ReduxStore\";\nimport { useDispatch } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Navbar = () => {\n  _s();\n  const dispatch = useDispatch();\n  const username = useSelector(state => {\n    return state.user.username;\n  });\n  const [isSuper, setisSuper] = useState(false);\n  const [isAuth, setIsAuth] = useState(false);\n  const refresh_tokens = localStorage.getItem(\"refresh_token\");\n  useEffect(() => {\n    if (localStorage.getItem(\"access_token\") !== null) {\n      setIsAuth(true);\n      const isSuperFromStorage = localStorage.getItem(\"is_super\") === \"true\";\n      setisSuper(isSuperFromStorage);\n      console.log(\"is super =\", isSuperFromStorage); // This will show the updated value\n      console.log(\"yellow its here\");\n    }\n  }, []);\n  const logoutHandle = () => {\n    (async () => {\n      try {\n        // You may need to include the refresh_token in your request data\n        const requestData = {\n          refresh_token: refresh_tokens // Replace with your actual refresh token\n        };\n\n        const config = {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        };\n        const response = await axios.post(\"http://127.0.0.1:8000/api/logout\", requestData, config);\n\n        // Handle the response as needed\n        if (response.status === 205) {\n          // Successful logout, handle accordingly\n          axios.defaults.headers.common[\"Authorization\"] = null;\n          window.location.href = \"/login\";\n          dispatch(logout());\n          alert(\"Logout successful\");\n        } else {\n          // Handle other response statuses if necessary\n          console.log(\"Logout failed\");\n        }\n      } catch (error) {\n        // Handle any errors from the request\n        console.error(\"Logout error:\", error);\n      }\n    })();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0\",\n      children: \"Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"mr-5\",\n        to: \"/register\",\n        children: \"Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), isSuper && /*#__PURE__*/_jsxDEV(Link, {\n        className: \"mr-5\",\n        to: \"/admin\",\n        children: \"Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), isAuth && /*#__PURE__*/_jsxDEV(Link, {\n        className: \"mr-5\",\n        to: \"/profile\",\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      onClick: () => console.log(username),\n      className: \"inline-flex items-center border-0 py-1 px-3 mt-4 md:mt-0\",\n      children: [\"hello \", username, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logoutHandle,\n      className: \"inline-flex items-center bg-yellow-500 border-0 py-1 px-3 mt-4 md:mt-0\",\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(Navbar, \"50RVUYpg9Qaej6JfPTKP5pmSTpA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = Navbar;\nexport default Navbar;\nvar _c;\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useSelector","logout","useDispatch","jsxDEV","_jsxDEV","Navbar","_s","dispatch","username","state","user","isSuper","setisSuper","isAuth","setIsAuth","refresh_tokens","localStorage","getItem","isSuperFromStorage","console","log","logoutHandle","requestData","refresh_token","config","headers","response","post","status","defaults","common","window","location","href","alert","error","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["F:/backup/react/week3/sudheesh/frontend/src/items/navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux/es/hooks/useSelector\";\r\nimport { logout } from \"../../ReduxStore/ReduxStore\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Navbar = () => {\r\n  const dispatch = useDispatch();\r\n  const username = useSelector((state) => {\r\n    return state.user.username;\r\n  });\r\n  const [isSuper, setisSuper] = useState(false);\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const refresh_tokens = localStorage.getItem(\"refresh_token\");\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"access_token\") !== null) {\r\n      setIsAuth(true);\r\n      const isSuperFromStorage = localStorage.getItem(\"is_super\") === \"true\";\r\n      setisSuper(isSuperFromStorage);\r\n      console.log(\"is super =\", isSuperFromStorage); // This will show the updated value\r\n      console.log(\"yellow its here\");\r\n    }\r\n  }, []);\r\n\r\n  const logoutHandle = () => {\r\n    (async () => {\r\n      try {\r\n        // You may need to include the refresh_token in your request data\r\n        const requestData = {\r\n          refresh_token: refresh_tokens, // Replace with your actual refresh token\r\n        };\r\n        const config = {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        };\r\n\r\n        const response = await axios.post(\r\n          \"http://127.0.0.1:8000/api/logout\",\r\n          requestData,\r\n          config\r\n        );\r\n\r\n        // Handle the response as needed\r\n        if (response.status === 205) {\r\n          // Successful logout, handle accordingly\r\n          axios.defaults.headers.common[\"Authorization\"] = null;\r\n          window.location.href = \"/login\";\r\n          dispatch(logout());\r\n          alert(\"Logout successful\");\r\n        } else {\r\n          // Handle other response statuses if necessary\r\n          console.log(\"Logout failed\");\r\n        }\r\n      } catch (error) {\r\n        // Handle any errors from the request\r\n        console.error(\"Logout error:\", error);\r\n      }\r\n    })();\r\n  };\r\n  return (\r\n    <div className=\"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center\">\r\n      <Link\r\n        to=\"/\"\r\n        className=\"flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0\"\r\n      >\r\n        {/* Content for your link */}Home\r\n      </Link>\r\n      <div className=\"md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center\">\r\n        <Link className=\"mr-5\" to=\"/register\">\r\n          Sign up\r\n        </Link>\r\n        {isSuper && (\r\n          <Link className=\"mr-5\" to=\"/admin\">\r\n            Admin\r\n          </Link>\r\n        )}\r\n        {isAuth && (\r\n          <Link className=\"mr-5\" to=\"/profile\">\r\n            Profile\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <h5\r\n        onClick={() => console.log(username)}\r\n        className=\"inline-flex items-center border-0 py-1 px-3 mt-4 md:mt-0\"\r\n      >\r\n        hello {username}{\" \"}\r\n      </h5>\r\n      <button\r\n        onClick={logoutHandle}\r\n        className=\"inline-flex items-center bg-yellow-500 border-0 py-1 px-3 mt-4 md:mt-0\"\r\n      >\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}